# Unity 3D 調酒遊戲開發計劃 - Claude 開發指南

## 🎯 當前版本目標
將 Three.js 網頁版調酒遊戲完整移植到 Unity，並提升視覺效果和遊戲體驗。

## 📋 待完成功能清單

### 1. 🥤 液體顯示系統 [高優先級]
- [x] 基礎液體顯示
- [x] **動態液體高度顯示**
  - [x] 根據倒入量即時更新液體高度
  - [x] 液體混合顏色即時計算
  - [x] 倒酒時的液體流動動畫
  - [x] 液體表面波動效果
- [ ] **改進液體著色器**
  - [ ] 實現真實的液體折射效果
  - [ ] 添加液體表面反射
  - [ ] 泡沫和氣泡效果（啤酒、汽水）
  - [ ] 液體分層效果（雞尾酒層次）

### 2. 🎨 視覺效果提升 [高優先級]
- [ ] **材質和貼圖改進**
  - [ ] PBR材質升級（金屬、木材、玻璃）
  - [ ] 高解析度貼圖製作
  - [ ] 法線貼圖和粗糙度貼圖
  - [ ] 環境反射探針設置
- [ ] **場景美化**
  - [ ] 動態陰影和全局光照
  - [ ] 後處理效果（景深、色調映射、泛光）
  - [ ] 粒子效果（煙霧、塵埃、光束）
- [ ] **酒瓶和杯子視覺**
  - [ ] 透明玻璃材質改進
  - [ ] 酒瓶標籤設計
  - [ ] 冰塊模型和效果

### 3. 🎮 核心遊戲機制 [最高優先級]
- [x] **計分系統 (ScoreManager)**
  - [x] 基礎分數追蹤
  - [x] 給NPC送酒功能（F鍵）
  - [x] NPC評分機制完善 (使用幾何距離判定 酒的成功程度 例如 威士忌 + 伏特加 變成 伏特加 + 琴酒 則只缺一樣，用最近幾何距離算。 誤差不超過 10% 都算滿分，往下則遞減給分(錢幣))
  - [x] 金幣系統 (積分 由NPC評分後給的金幣 預設都是一杯酒 300 金幣)
- [ ] **NPC互動升級**
  - [ ] NPC點單系統
  - [ ] NPC耐心值條 (當詢問 NPC 後 只會有2分的等待做好時間)
  - [ ] 特殊要求（加冰 少糖 多點酸 等）

### 4. 🎯 互動系統改進 [高優先級]
- [ ] **物品放置修正**
  - [ ] 記錄每個物品的原始位置
  - [ ] R鍵：放回原始位置
  - [ ] Q鍵：原地放下物品
  - [ ] 物品放置預覽（半透明顯示）
  - [ ] 智能吸附點（桌面、架子）
- [ ] **操作優化**
  - [ ] 倒酒精準度提升
  - [ ] 搖酒器互動改進 (目前無互動功能)

### 5. 🍹 調酒系統完善
- [ ] **配方系統**
  - [ ] 完整配方資料庫
  - [ ] 配方書UI（按Tab查看）
- [ ] **調製機制**
  - [ ] 攪拌動作
  - [ ] 裝飾物系統（檸檬片、櫻桃）
  - [ ] 溫度系統（冰鎮、加熱 預設所有的酒都是倒出為 25度 冰塊需另外做模型 放在吧檯上）

### 6. 🎵 音效和音樂 (如果可以自己抓free asset 就claude去安裝 然後適配遊戲)
- [ ] **環境音效**
  - [ ] 背景音樂循環
  - [ ] 酒吧環境音（談話聲、音樂）
  - [ ] 動態音量調整
- [ ] **互動音效**
  - [ ] 倒酒聲音
  - [ ] 玻璃碰撞聲
  - [ ] 搖酒聲
  - [ ] 冰塊聲音
  - [ ] NPC對話語音

### 7. 📊 進度和成就系統
- [ ] **成就系統**
  - [ ] 速度挑戰成就 (一分鐘內出三杯酒給NPC)
  - [ ] 收集類成就 (所有商店的酒都買到最高級)

### 8. 🎨 UI/UX 與使用者體驗 [高優先級]
- [ ] **開始畫面選單**
  - [ ] 新遊戲 (New Game)
  - [ ] 繼續遊戲 (Continue)
  - [ ] 設定 (Settings)
  - [ ] 離開 (Quit)
  - [ ] MainMenuManager.cs
  - [ ] SceneLoader.cs
- [ ] **設置選單**
  - [ ] 圖形品質選項
  - [ ] 音量控制 (背景音樂、音效)
  - [ ] 滑鼠靈敏度調整 (對應 mouseSensitivity)
  - [ ] 按鍵自定義
  - [ ] 語言切換 (中文/英文)
  - [ ] SettingsManager.cs
- [ ] **存檔/讀取系統**
  - [ ] 記錄玩家進度
  - [ ] 記錄金錢數量
  - [ ] 記錄解鎖的酒類等級
  - [ ] 記錄已解鎖配方
  - [ ] SaveLoadSystem.cs
- [ ] **教程/引導系統**
  - [ ] 首次進入遊戲教學
  - [ ] 操作基本教學 (移動、拾取、倒酒)
  - [ ] 調酒基本教學 (配方、搖酒、評分)
  - [ ] TutorialSystem.cs

### 9. 🛒 商店與升級系統 [高優先級]
- [ ] **商店介面**
  - [ ] 商店UI面板 (ShopPanel)
  - [ ] 酒類升級列表顯示
  - [ ] 購買確認對話框
  - [ ] 金錢顯示與扣除
  - [ ] ShopManager.cs
- [ ] **升級系統**
  - [ ] 基酒等級系統 (Level 1 → Level 2 → Level 3)
  - [ ] 升級價格設定 (例: Lv1→Lv2 需要500金幣)
  - [ ] 升級效果實現
    - [ ] 提高評價上限 (高階酒 = 更高滿意度分數)
    - [ ] 增加倒酒精度緩衝 (更高容錯率)
  - [ ] UpgradeSystem.cs
- [ ] **酒類資料擴展**
  - [ ] LiquorData.cs 新增 Level 欄位 (int, 1-3)
  - [ ] LiquorData.cs 新增 IsLocked 屬性 (bool)
  - [ ] LiquorData.cs 新增 UnlockPrice 欄位 (int)
  - [ ] LiquorData.cs 新增 UpgradePrice 欄位 (int[])
- [ ] **評分系統整合**
  - [ ] DrinkEvaluator.cs 納入 Level 參數
  - [ ] 根據酒類等級調整評分上限
  - [ ] 顯示使用高級酒的獎勵提示
- [ ] **新酒類/配方解鎖**
  - [ ] RecipeDatabase.asset 新增 IsLocked 屬性
  - [ ] 商店允許購買解鎖新利口酒
  - [ ] 商店允許購買解鎖稀有配方

### 10. 💾 存檔和設置
- [ ] **遊戲模式**
  - [ ] 參考黃金礦工(單一一次通關)

## 📅 開發階段

### 第一階段 - 核心互動系統改進
1. ✅ 修復液體顯示問題
2. ✅ 改進材質和貼圖
3. ✅ 實現給NPC送酒和評分系統
4. 🔄 **互動系統改進** [當前進行中]
   - [ ] 物品原始位置記錄
   - [ ] R鍵放回原位功能
   - [ ] Q鍵原地放下功能
   - [ ] 物品放置預覽系統
   - [ ] 智能吸附點系統
5. 🔄 **搖酒器互動完善**
   - [ ] 搖酒動作檢測
   - [ ] 搖酒進度顯示
   - [ ] 搖酒完成效果

### 第二階段 - 調酒系統與UI/UX
1. **配方系統完善**
   - [ ] 完整配方資料庫 ScriptableObject
   - [ ] 配方書UI (Tab鍵查看)
2. **調製機制**
   - [ ] 攪拌動作系統
   - [ ] 裝飾物系統 (檸檬片、櫻桃)
   - [ ] 溫度系統 (冰塊模型、溫度追蹤)
3. **UI/UX 系統**
   - [ ] 主菜單系統 (MainMenuManager, SceneLoader)
   - [ ] 設定選單 (SettingsManager)
   - [ ] 存檔系統 (SaveLoadSystem)
   - [ ] 教程系統 (TutorialSystem)

### 第三階段 - 商店系統與音效
1. **商店與升級系統**
   - [ ] 商店UI面板 (ShopManager)
   - [ ] 升級系統 (UpgradeSystem)
   - [ ] LiquorData 擴展 (Level, IsLocked, Prices)
   - [ ] DrinkEvaluator 整合等級參數
   - [ ] 新酒類/配方解鎖機制
2. **音效系統**
   - [ ] 環境音效 (背景音樂、酒吧環境音)
   - [ ] 互動音效 (倒酒、碰撞、搖酒、冰塊)
   - [ ] 音效資源整合 (Unity Asset Store 免費資源)

### 第四階段 - 最終優化與打磨
1. NPC互動升級 (點單系統、耐心值條)
2. 進度和成就系統
3. 視覺效果提升 (液體著色器、場景美化)
4. 性能優化和Bug修復
5. 完整測試和文檔更新

## 🐛 已知問題
- [x] 液體倒入後不顯示
- [x] 物品返回位置錯誤
- [ ] 倒酒角度檢測過於嚴格
- [ ] NPC對話框有時不消失
- [ ] 某些情況下物品會穿透桌面

## 📝 備註
- 保持與原版Three.js遊戲的核心玩法一致
- 重點提升視覺效果和操作手感
- 確保新手友好，添加教學引導
- 考慮後續擴展性（DLC、多人模式）

---
**專案資訊：**
- Unity 版本：2022.3.62f2 LTS
- 渲染管線：URP (Universal Render Pipeline)
- 總代碼行數：14,585 行 (40個C#腳本)
- 當前分支：claude/improve-interaction-system-016k3H65Pg9wmCSsWbNAHwwE

---
最後更新：2025-11-29
