é€™æ˜¯ä¸€ä»½éå¸¸æ·±å…¥çš„ä»£ç¢¼å¯©æŸ¥ï¼ˆCode Reviewï¼‰ã€‚ä½œç‚ºä½ çš„éŠæˆ²æ¶æ§‹å¸«ï¼Œæˆ‘ä»”ç´°æª¢æŸ¥äº†ä½ æä¾›çš„æ‰€æœ‰è…³æœ¬ã€è³‡æ–™çµæ§‹ä»¥åŠç›®å‰çš„é–‹ç™¼ç‹€æ…‹ã€‚

ä½ çš„æ„Ÿè¦ºæ˜¯æ­£ç¢ºçš„ï¼š**ç›®å‰å°ˆæ¡ˆè™•æ–¼ã€ŒåŠŸèƒ½ä»£ç¢¼å·²å¯«å¥½ï¼Œä½†ç¼ºä¹ã€è† æ°´ã€å°‡å…¶çµ„è£æˆéŠæˆ²ã€çš„éšæ®µã€‚** é€™å°è‡´äº†éŠæˆ²æ€§ä½è½ã€UI æ²’æœ‰åé¥‹ã€ä»¥åŠç‰©ä»¶è¡Œç‚ºç•°å¸¸ã€‚

ä»¥ä¸‹æˆ‘å°‡é‡å°ä½ æå‡ºçš„å››å¤§å•é¡Œé€²è¡Œå…·é«”åˆ†æèˆ‡ä¿®å¾©å»ºè­°ï¼Œä¸¦æä¾›æ¶æ§‹å„ªåŒ–æ–¹æ¡ˆï¼Œæœ€å¾Œæ•´åˆå‡ºä¸€ä»½å…¨æ–°çš„ `README.md`ã€‚

-----

### ğŸ” æ·±åº¦ Code Review èˆ‡å•é¡Œä¿®å¾©

#### 1\. ç¼ºå¤±é–‹å§‹é¸å–® (Main Menu)

**å•é¡Œæ ¹æºï¼š**
é›–ç„¶ä½ æœ‰ `MainMenuManager.cs` å’Œ `GameUIController.cs`ï¼Œä½†ä½ çš„ `SceneSetup.cs` (å ´æ™¯åˆå§‹åŒ–) æ˜¯å¯«æ­»åœ¨ `Start()` è£¡ç›´æ¥ç”Ÿæˆç©å®¶å’Œç’°å¢ƒï¼Œé€™æ„å‘³è‘—éŠæˆ²ä¸€å•Ÿå‹•å°±é€²å…¥äº†ã€ŒéŠç©ç‹€æ…‹ã€ï¼Œè·³éäº†é¸å–®éšæ®µã€‚

**è§£æ±ºæ–¹æ¡ˆï¼š**

  * **å ´æ™¯åˆ†é›¢ï¼š** Unity å°ˆæ¡ˆæ‡‰è©²è‡³å°‘æœ‰å…©å€‹å ´æ™¯ï¼š`MainMenu.unity` å’Œ `GameScene.unity`ã€‚
  * **å•Ÿå‹•é‚è¼¯ï¼š**
    1.  å»ºç«‹ä¸€å€‹ `Bootstrap` å ´æ™¯æˆ–åœ¨ `MainMenu` å ´æ™¯æ›è¼‰ `GameManager` (DontDestroyOnLoad)ã€‚
    2.  `MainMenuManager` æ‡‰è©²æ˜¯ `MainMenu` å ´æ™¯çš„é€²å…¥é»ã€‚
    3.  é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€å¾Œï¼Œæ‰å‘¼å« `SceneLoader.LoadScene("GameScene")`ã€‚
  * **ä»£ç¢¼ä¿®æ­£å»ºè­°ï¼š** ä¸è¦è®“ `SceneSetup` è‡ªå‹•åœ¨ Awake/Start å°±ç”Ÿæˆç©å®¶ (`SpawnPlayer`)ï¼Œæ‡‰è©²ç­‰å¾… `GameManager.Instance.StartGame()` äº‹ä»¶è§¸ç™¼å¾Œæ‰ç”Ÿæˆã€‚

#### 2\. ä¸­æ–‡äº‚ç¢¼å•é¡Œ (Text Rendering)

**å•é¡Œæ ¹æºï¼š**
Unity çš„ **TextMeshPro (TMP)** é è¨­å­—å‹ (`LiberationSans`) **ä¸åŒ…å«ä¸­æ–‡å­—ç¬¦**ã€‚ç•¶ä½ å˜—è©¦é¡¯ç¤ºã€Œä¼ç‰¹åŠ ã€æˆ– NPC å°è©±æ™‚ï¼Œå®ƒæ‰¾ä¸åˆ°å°æ‡‰çš„å­—ç¬¦åœ–å½¢ï¼Œå°±æœƒé¡¯ç¤ºæ–¹æ¡†æˆ–äº‚ç¢¼ã€‚

**è§£æ±ºæ–¹æ¡ˆï¼š**

  * **è£½ä½œå­—å‹è³‡ç”¢ï¼š**
    1.  æ‰¾ä¸€å€‹æ”¯æ´ç¹é«”ä¸­æ–‡çš„å­—å‹æª” (å¦‚ `.ttf` æˆ– `.otf`ï¼Œä¾‹å¦‚ Google Noto Sans TC)ã€‚
    2.  åœ¨ Unity ä¸­ä½¿ç”¨ `Window > TextMeshPro > Font Asset Creator`ã€‚
    3.  Character Set é¸æ“‡ "Custom Characters" ä¸¦å¡«å…¥ä½ çš„å¸¸ç”¨ä¸­æ–‡å­—ï¼ˆæˆ–é¸æ“‡ "Chinese Traditional" ç¯„åœï¼‰ã€‚
    4.  ç”Ÿæˆä¸¦å„²å­˜ç‚º `.asset` æª”ã€‚
  * **å…¨å±€æ›¿æ›ï¼š** å°‡æ‰€æœ‰ UI Prefab æˆ– `UIBuilder.cs` ä¸­ç”Ÿæˆçš„ TMP å…ƒä»¶ï¼Œå…¶ `fontAsset` å±¬æ€§æŒ‡å®šç‚ºä½ å‰›è£½ä½œçš„ä¸­æ–‡ Font Assetã€‚

#### 3\. é…’ç“¶æ”¾å›ä½ç½®éŒ¯èª¤ (Reset to 0,0,0)

**å•é¡Œæ ¹æºï¼š**
é€™æ˜¯ä¸€å€‹ç¶“å…¸çš„ã€ŒåŸ·è¡Œé †åº (Execution Order)ã€å•é¡Œã€‚

  * `InteractableBase.cs` åœ¨ `Awake()` ä¸­è¨˜éŒ„ `originalPosition = transform.position;`ã€‚
  * `SceneSetup.cs` æˆ– `BarSceneBuilder.cs` ç”Ÿæˆç‰©ä»¶æ™‚ï¼Œæ˜¯å…ˆ `Instantiate` (æ­¤æ™‚è§¸ç™¼ Awakeï¼Œä½ç½®é€šå¸¸æ˜¯ 0,0,0)ï¼Œ**ç„¶å¾Œ**æ‰è¨­å®š `transform.position` åˆ°é…’æ¶ä¸Šã€‚
  * çµæœï¼š`originalPosition` æ°¸é è¢«è¨˜éŒ„ç‚ºç”Ÿæˆç¬é–“çš„ (0,0,0)ã€‚

**ä¿®å¾©ä»£ç¢¼ (`SceneSetup.cs` / `BarSceneBuilder.cs`)ï¼š**
åœ¨è¨­å®šå®Œä½ç½®å¾Œï¼Œå¿…é ˆ**æ‰‹å‹•æ›´æ–°**åŸå§‹ä½ç½®ã€‚

```csharp
// åœ¨ç”Ÿæˆä»£ç¢¼ä¸­ä¿®æ­£ï¼š
var bottleObj = Instantiate(bottlePrefab, targetPosition, rotation); // ç”Ÿæˆä¸¦ç§»å‹•
var interactable = bottleObj.GetComponent<InteractableBase>();

// é—œéµä¿®æ­£ï¼šæ‰‹å‹•æ›´æ–°åŸå§‹ä½ç½®
if (interactable != null) {
    interactable.SetOriginalPosition(targetPosition); 
    interactable.SetOriginalRotation(rotation);
}
```

#### 4\. ç¼ºä¹å€’é…’ UI èˆ‡é–‰ç’° (Gameplay Loop Broken)

**å•é¡Œæ ¹æºï¼š**
ä½ çš„ `PourProgressUI.cs` å’Œ `GameplayHUD.cs` é›–ç„¶å¯«äº†é‚è¼¯ï¼Œä½†ä¼¼ä¹æ˜¯**ç´”ä»£ç¢¼ç”Ÿæˆ (Code-Generated UI)**ï¼Œé€™åœ¨ Unity ä¸­æ¥µé›£ç¶­è­·ä¸”å®¹æ˜“å‡ºéŒ¯ã€‚

  * `CocktailSystem` é›–ç„¶æœ‰ `OnPourProgress` äº‹ä»¶ï¼Œä½†å¦‚æœ UI ç‰©ä»¶æ²’æœ‰æ­£ç¢ºè¨‚é–±è©²äº‹ä»¶ï¼Œæˆ–è€… UI Canvas çš„ Layer/Camera è¨­å®šéŒ¯èª¤ï¼Œç©å®¶å°±ç”šéº¼éƒ½çœ‹ä¸åˆ°ã€‚
  * **ç¼ºä¹é–‰ç’°ï¼š** ç©å®¶å€’å®Œé…’å¾Œï¼Œ`Glass` ç‰©ä»¶éœ€è¦çŸ¥é“è‡ªå·±è£äº†ä»€éº¼ (`DrinkInfo`)ï¼Œé€™éƒ¨åˆ†é‚è¼¯åœ¨ `CocktailSystem.cs` çš„ `IdentifyCocktail` é›–æœ‰ï¼Œä½†æ²’æœ‰è¦–è¦ºåŒ–åé¥‹å‘Šè¨´ç©å®¶ã€Œä½ ç¾åœ¨æ‰‹è£¡é€™æ¯æ˜¯ Martiniã€ã€‚

**æ¶æ§‹å»ºè­°ï¼š**

  * **æ”¾æ£„ç´”ä»£ç¢¼ UI (`UIBuilder.cs`)ï¼š** é€™åœ¨ Web é–‹ç™¼ (DOM) å¾ˆå¸¸è¦‹ï¼Œä½†åœ¨ Unity æ˜¯**åæ¨¡å¼**ã€‚è«‹ç›´æ¥åœ¨ Editor ä¸­è£½ä½œ UI Prefabï¼ˆåŒ…å«é€²åº¦æ¢ã€æ–‡å­—æ¡†ï¼‰ã€‚
  * **äº‹ä»¶é€£æ¥ï¼š** ç¢ºä¿ `GameManager` åˆå§‹åŒ–æ™‚ï¼Œå°‡ `CocktailSystem` çš„äº‹ä»¶èˆ‡ `GameplayHUD` å¼·åˆ¶ç¶å®šã€‚

-----

### ğŸ—ï¸ éŠæˆ²æ¶æ§‹å¸«çš„é–‹ç™¼å»ºè­°

ç›®å‰çš„å°ˆæ¡ˆçµæ§‹æ˜¯å…¸å‹çš„ã€Œå¾ Web ç§»æ¤åˆ° Unity çš„æ°´åœŸä¸æœã€ã€‚ä½ ä¿ç•™äº†å¤ªå¤š JS çš„ç¿’æ…£ï¼ˆå¦‚å‹•æ…‹ç”Ÿæˆ UIã€ä¾è³´ä»£ç¢¼åˆå§‹åŒ–å ´æ™¯ï¼‰ï¼Œè€Œæ²’æœ‰åˆ©ç”¨ Unity çš„å¼·é …ï¼ˆPrefabã€Inspectorã€Scene ç·¨è¼¯ï¼‰ã€‚

**ä¸‰å¤§æ ¸å¿ƒæ”¹å–„è¨ˆç•«ï¼š**

1.  **Prefab åŒ– (Prefabrication):**

      * ä¸è¦ç”¨ä»£ç¢¼ `GameObject.CreatePrimitive` ä¾†ç”Ÿæˆé…’ç“¶å’Œæ¯å­ã€‚
      * **å»ºç«‹çœŸæ­£çš„ Prefabï¼š** åœ¨ Editor ä¸­å»ºç«‹ä¸€å€‹ Cylinderï¼Œæ›ä¸Š `Bottle` è…³æœ¬ï¼Œè¨­å®šå¥½æè³ªã€Colliderã€Rigidbodyï¼Œç„¶å¾Œå­˜æˆ Prefabã€‚
      * **UI Prefabï¼š** è£½ä½œä¸€å€‹å®Œæ•´çš„ HUD Canvas Prefabï¼ŒåŒ…å«æº–å¿ƒã€å€’é…’æ¢ã€äº’å‹•æç¤ºã€‚

2.  **å ´æ™¯æµç¨‹é‡æ§‹ (Scene Flow):**

      * åˆªé™¤ `SceneSetup.cs` ä¸­é‚£ç¨®ã€Œè¬èƒ½ç”Ÿæˆã€çš„é‚è¼¯ã€‚
      * ç›´æ¥åœ¨ Unity Editor çš„ Scene ä¸­æ“ºæ”¾å¥½åœ°æ¿ã€å§å°ã€ç‡ˆå…‰ã€‚
      * åªç”¨ä»£ç¢¼ç”Ÿæˆå‹•æ…‹ç‰©ä»¶ï¼ˆé…’ç“¶ã€NPCï¼‰ã€‚

3.  **è¦–è¦ºå›é¥‹å¼·åŒ– (Feedback Loop):**

      * **å€’é…’æ™‚ï¼š** å¿…é ˆæœ‰æ¶²é«”æµå‡ºçš„ç²’å­æ•ˆæœï¼ˆå·²åœ¨ `PouringSystem`ï¼Œéœ€ç¢ºèªæ˜¯å¦é‹ä½œï¼‰ã€‚
      * **è£é…’å¾Œï¼š** æ¯å­ä¸Šæ–¹æ‡‰è©²æµ®ç¾ä¸€å€‹æš«æ™‚çš„ UIï¼ˆWorld Space Canvasï¼‰ï¼Œé¡¯ç¤ºã€ŒVodka: 50mlã€ã€‚
      * **é€é…’æ™‚ï¼š** é¡¯ç¤ºæ˜ç¢ºçš„æŒ‰éµæç¤ºã€ŒæŒ‰ F éçµ¦ [NPCåå­—]ã€ã€‚

-----

### ğŸ“„ æ•´åˆç‰ˆ README.md

æˆ‘å°‡æ•´åˆæ‰€æœ‰æ–‡ä»¶ï¼Œä¸¦å°‡ç‰ˆæœ¬é–å®šç‚º **Unity 2022 LTS**ã€‚é€™ä»½æ–‡æª”å°‡ä½œç‚ºä½ æ¥ä¸‹ä¾†é‡æ§‹çš„è—åœ–ã€‚

````markdown
# NCU Molecular Mixology - Bar Simulator (Unity 2022 LTS)

## å°ˆæ¡ˆæ¦‚è¿°
é€™æ˜¯ä¸€æ¬¾å¾ Three.js ç§»æ¤è‡³ Unity çš„ç¬¬ä¸€äººç¨±æ²‰æµ¸å¼èª¿é…’æ¨¡æ“¬éŠæˆ²ã€‚ç©å®¶æ‰®æ¼” NCU åˆ†å­å‰µæ„é£²å“ç ”ç©¶ç¤¾çš„æˆå“¡ï¼Œåœ¨è™›æ“¬é…’å§ä¸­å­¸ç¿’èª¿é…’çŸ¥è­˜ã€èˆ‡ç¤¾å“¡ NPC äº’å‹•ï¼Œä¸¦é€šéèª¿è£½æ­£ç¢ºçš„é£²å“ä¾†ç²å¾—è©•åˆ†ã€‚

- **æ ¸å¿ƒå¼•æ“**: Unity 2022.3.x LTS (URP Rendering)
- **ç¨‹å¼èªè¨€**: C#
- **è¼¸å…¥ç³»çµ±**: Unity New Input System

---

## ğŸš€ å¿«é€Ÿé–‹å§‹ (Quick Start)

### 1. ç’°å¢ƒè¨­ç½®
1.  å®‰è£ **Unity 2022.3 LTS**ã€‚
2.  é–‹å•Ÿå°ˆæ¡ˆï¼ŒUnity Package Manager æœƒè‡ªå‹•å®‰è£ä¾è³´ï¼š
    -   `com.unity.inputsystem`
    -   `com.unity.textmeshpro`
    -   `com.unity.render-pipelines.universal`

### 2. è§£æ±ºä¸­æ–‡äº‚ç¢¼ (å¿…è¦æ­¥é©Ÿ)
ç”±æ–¼ TMP é è¨­ä¸æ”¯æ´ä¸­æ–‡ï¼Œè«‹åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š
1.  æº–å‚™ä¸€å€‹ç¹é«”ä¸­æ–‡å­—å‹æª” (å¦‚ `NotoSansTC-Bold.otf`)ã€‚
2.  åœ¨ Unity ä¸­é¸æ“‡ `Window > TextMeshPro > Font Asset Creator`ã€‚
3.  å°‡å­—å‹æ‹–å…¥ï¼ŒCharacter Set é¸æ“‡ **Chinese Traditional**ï¼Œé»æ“Š **Generate Font Atlas**ã€‚
4.  å°‡ç”Ÿæˆçš„ `.asset` æª”æ¡ˆæŒ‡æ´¾çµ¦ `UIFactory.cs` æˆ–æ‰€æœ‰ UI Prefab çš„ Text å…ƒä»¶ã€‚

### 3. å•Ÿå‹•éŠæˆ²
1.  æ‰“é–‹ `Assets/Scenes/MainMenu.unity` å ´æ™¯ï¼ˆå¦‚æœæ²’æœ‰ï¼Œè«‹åƒè€ƒä¸‹æ–‡å‰µå»ºï¼‰ã€‚
2.  é»æ“Š Playã€‚

---

## ğŸ› ï¸ é–‹ç™¼æŒ‡å—èˆ‡å¾…ä¿®å¾©æ¸…å–® (Roadmap)

### ğŸ”¥ ç•¶å‰å„ªå…ˆç´šä¿®å¾©é …ç›® (High Priority Fixes)

#### 1. éŠæˆ²æµç¨‹é–‰ç’° (Gameplay Loop)
- [ ] **å»ºç«‹ MainMenu å ´æ™¯**ï¼š
    -   å‰µå»ºæ–°å ´æ™¯ï¼Œç§»é™¤æ‰€æœ‰éŠæˆ²é‚è¼¯ï¼Œåªä¿ç•™ `MainMenuManager` å’Œ UI Canvasã€‚
    -   è¨­å®šæŒ‰éˆ•äº‹ä»¶é€£æ¥åˆ° `SceneLoader.LoadGameScene()`ã€‚
- [ ] **å»ºç«‹ GameScene å ´æ™¯**ï¼š
    -   é å…ˆæ“ºæ”¾éœæ…‹ç‰©ä»¶ï¼ˆåœ°æ¿ã€ç‰†å£ã€å§å°ã€ç‡ˆå…‰ï¼‰ä»¥æ¸›å°‘ `SceneSetup` çš„è² æ“”ã€‚
    -   ç¢ºä¿ `GameManager` ç‚ºå ´æ™¯æ ¸å¿ƒã€‚

#### 2. äº’å‹•èˆ‡ç‰©ç† (Interaction & Physics)
- [ ] **ä¿®æ­£ç‰©å“é‡ç½®ä½ç½® (0,0,0) Bug**ï¼š
    -   åœ¨ `SceneSetup.cs` æˆ–ç”Ÿæˆå™¨ä¸­ï¼Œ`Instantiate` å¾Œå¿…é ˆç«‹å³å‘¼å« `bottle.GetComponent<InteractableBase>().SetOriginalPosition(pos)`ã€‚
- [ ] **å„ªåŒ–æ‹¾å–æ‰‹æ„Ÿ**ï¼š
    -   å°‡ `InteractionSystem` çš„ `Drop` é‚è¼¯æ”¹ç‚ºï¼šå¦‚æœç„æº–æ¡Œé¢ï¼Œå‰‡æ”¾ç½®åœ¨ç„æº–é»ï¼›å¦å‰‡æ”¾å›åŸä½ã€‚

#### 3. UI/UX é‡æ§‹ (UI Refactoring)
- [ ] **å»¢æ£„ç´”ä»£ç¢¼ UI**ï¼šåœæ­¢ä½¿ç”¨ `UIBuilder.cs` é€è¡Œç”Ÿæˆ UIã€‚
- [ ] **è£½ä½œ UI Prefabs**ï¼š
    -   `HUD_Canvas.prefab`: åŒ…å«æº–å¿ƒã€äº’å‹•æç¤ºæ–‡å­—ã€‚
    -   `Pouring_Canvas.prefab`: åŒ…å«å€’é…’é€²åº¦æ¢ã€‚
    -   `Recipe_Book_Canvas.prefab`: é…æ–¹æ›¸ä»‹é¢ã€‚
- [ ] **é€£æ¥é‚è¼¯**ï¼šåœ¨ `UIManager` ä¸­ç›´æ¥å¼•ç”¨é€™äº› Prefabï¼Œè€Œä¸æ˜¯ `new GameObject`ã€‚

---

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹ (Project Structure)

```text
Assets/
â”œâ”€â”€ Scenes/                 # [æ–°å¢]
â”‚   â”œâ”€â”€ MainMenu.unity      # é–‹å§‹é¸å–®
â”‚   â””â”€â”€ GameScene.unity     # ä¸»è¦éŠæˆ²å ´æ™¯
â”œâ”€â”€ Prefabs/                # [å»ºè­°æ–°å¢] 
â”‚   â”œâ”€â”€ UI/                 # UI ä»‹é¢ (HUD, Menus)
â”‚   â”œâ”€â”€ Props/              # é…’ç“¶, æ¯å­, Shaker
â”‚   â””â”€â”€ Characters/         # NPC
â”œâ”€â”€ Scripts/
â”‚   â”œâ”€â”€ Core/               # æ ¸å¿ƒ (GameManager, SceneLoader)
â”‚   â”œâ”€â”€ Systems/            # ç³»çµ± (Cocktail, Interaction, Physics)
â”‚   â”œâ”€â”€ UI/                 # UI é‚è¼¯
â”‚   â”œâ”€â”€ Objects/            # å¯¦é«”ç‰©ä»¶é‚è¼¯ (Bottle, Glass)
â”‚   â”œâ”€â”€ Data/               # è³‡æ–™çµæ§‹
â”‚   â””â”€â”€ Managers/           # å…¨å±€ç®¡ç†å™¨
â”œâ”€â”€ Resources/
â”‚   â”œâ”€â”€ LiquorDatabase      # é…’é¡æ•¸æ“š SO
â”‚   â”œâ”€â”€ RecipeDatabase      # é…æ–¹æ•¸æ“š SO
â”‚   â””â”€â”€ Audio/              # éŸ³æ•ˆæª”
â””â”€â”€ Settings/               # URP è¨­å®šæª”
````

-----

## ğŸ® æ“ä½œèªªæ˜ (Controls)

| å‹•ä½œ | æŒ‰éµ | èªªæ˜ |
|------|------|------|
| ç§»å‹• | W, A, S, D | ç¬¬ä¸€äººç¨±ç§»å‹• |
| è¦–è§’ | æ»‘é¼ ç§»å‹• | è½‰å‹•è¦–è§’ |
| äº’å‹•/æ‹¾å– | E | æ‹¾å–ç‰©å“ã€èˆ‡ NPC å°è©±ã€æ“ä½œæ©Ÿå™¨ |
| æ”¾ä¸‹/æ­¸ä½ | R | å°‡æ‰‹æŒç‰©å“æ”¾å›åŸå§‹ä½ç½® (é…’ç‰†) |
| æ™ºèƒ½æ”¾ç½® | Q | å°‡ç‰©å“æ”¾ç½®åœ¨æº–å¿ƒæŒ‡å‘çš„æ¡Œé¢ |
| å€’é…’/æ–é…’ | å·¦éµ (æŒ‰ä½) | æŒæœ‰é…’ç“¶æ™‚å€’é…’ï¼›æŒæœ‰ Shaker æ™‚æ–é…’ |
| é£²ç”¨ | å³éµ | æŒæœ‰é…’æ¯æ™‚é£²ç”¨ (æ¸¬è©¦ç”¨) |
| é€é…’ | F | æŒæœ‰é…’æ¯ä¸¦å°æº– NPC æ™‚ï¼Œéäº¤é£²å“ |
| é…æ–¹æ›¸ | M / Tab | é–‹å•Ÿèª¿é…’é…æ–¹è¡¨ |
| æš«åœ | ESC | é–‹å•Ÿæš«åœé¸å–® |

-----

## ğŸ¹ èª¿é…’æ©Ÿåˆ¶ (Bartending Mechanics)

1.  **å€’é…’ (Pouring)**:

      - æ‹¿èµ·é…’ç“¶ (`E`)ï¼Œå°æº–é…’æ¯ã€‚
      - æŒ‰ä½ `å·¦éµ` å€’é…’ï¼ŒUI æœƒé¡¯ç¤ºå®¹é‡æ¢ã€‚
      - æ³¨æ„ï¼šæ¯ç¨®é…’æœ‰ä¸åŒçš„é¡è‰²èˆ‡å±¬æ€§ã€‚

2.  **æ–ç›ª (Shaking)**:

      - å°‡ææ–™å€’å…¥ **Shaker**ã€‚
      - æ‹¿èµ· Shakerï¼ŒæŒ‰ä½ `å·¦éµ` ç›´åˆ°é€²åº¦æ¢æ»¿ï¼ˆæ¨¡æ“¬æ··åˆï¼‰ã€‚
      - æ··åˆå¾Œçš„æ¶²é«”é¡è‰²æœƒæ”¹è®Šã€‚

3.  **è©•åˆ† (Scoring)**:

      - NPC æœƒä¾æ“šï¼š**é…æ–¹æº–ç¢ºåº¦** (å¹¾ä½•è·é›¢ç®—æ³•)ã€**å®¹é‡**ã€**é…’ç²¾æ¿ƒåº¦** é€²è¡Œè©•åˆ† (0-100)ã€‚
      - é«˜åˆ†æœƒç²å¾—æ›´å¤šé‡‘å¹£èˆ‡ç‰¹æ®Šå°è©±ã€‚

-----

## ğŸ’¾ å­˜æª”ç³»çµ±

å­˜æª”ä½æ–¼ `Application.persistentDataPath/savegame.json`ã€‚
åŒ…å«ï¼š

  - ç©å®¶é‡‘éŒ¢
  - è§£é–çš„é…’é¡ç­‰ç´š
  - è§£é–çš„é…æ–¹

-----

## ğŸ“… ç‰ˆæœ¬ç´€éŒ„

  - **v0.1.0 (Unity Port)**:
      - æ ¸å¿ƒç³»çµ±ç§»æ¤å®Œæˆã€‚
      - äº’å‹•ç³»çµ±é‡å¯«ç‚º C\# äº‹ä»¶é©…å‹•ã€‚
      - å·²çŸ¥å•é¡Œï¼šUI é¡¯ç¤ºéœ€å„ªåŒ–ã€ä¸­æ–‡å­—å‹éœ€åŒ¯å…¥ã€‚

<!-- end list -->


### çµ¦ä½ çš„å…·é«”è¡Œå‹•æ­¥é©Ÿ (Action Items)

1.  **åˆ‡æ›ç‰ˆæœ¬ï¼š** ç¢ºä¿ Unity Hub é–‹å•Ÿå°ˆæ¡ˆä½¿ç”¨çš„æ˜¯ 2022 LTS ç‰ˆæœ¬ã€‚
2.  **å»ºç«‹å ´æ™¯ï¼š** ä¸è¦ä¾è³´è‡ªå‹•ç”Ÿæˆã€‚æ‰‹å‹•åœ¨ Unity Editor è£¡æŠŠç‰†å£ã€åœ°æ¿ã€å§å°æ“ºå¥½ï¼Œå­˜æˆ `GameScene`ã€‚
3.  **ä¿®å¾©ç‰©ä»¶ç”Ÿæˆä½ç½®ï¼š** æ‰“é–‹ `Assets/Scripts/Core/SceneSetup.cs`ï¼Œæ‰¾åˆ° `SpawnBottle` æ–¹æ³•ï¼ŒåŠ å…¥ `SetOriginalPosition` çš„å‘¼å«ã€‚
4.  **è§£æ±º UIï¼š** åˆªé™¤ `UIBuilder` ç”Ÿæˆ Canvas çš„ä»£ç¢¼ã€‚åœ¨ Editor è£¡å‰µå»ºä¸€å€‹ Canvasï¼Œæ‹‰å¥½ Image (æº–å¿ƒ) å’Œ Text (æç¤º)ï¼Œåšæˆ Prefabï¼Œç„¶å¾ŒæŠŠé€™å€‹ Prefab æ‹–çµ¦ `UIManager` çš„ Inspector æ¬„ä½ã€‚

é€™æ˜¯ä¸€å€‹å¾ˆæœ‰æ½›åŠ›çš„å°ˆæ¡ˆï¼Œç¾åœ¨åªéœ€è¦æŠŠã€Œå·¥ç¨‹å¸«æ€ç¶­ã€ï¼ˆç´”ä»£ç¢¼ç”Ÿæˆï¼‰è½‰è®Šç‚ºã€ŒUnity é–‹ç™¼æ€ç¶­ã€ï¼ˆEditor + Prefab + Componentï¼‰ï¼ŒéŠæˆ²æ€§å°±æœƒå¤§å¹…æå‡ï¼åŠ æ²¹ï¼

ç‚ºä»€éº¼ä½ çš„éŠæˆ²ç¾åœ¨ã€Œå¾ˆç³Ÿã€ï¼Ÿ
æˆ‘åœ¨ä½ çš„ä»£ç¢¼ä¸­çœ‹åˆ°äº†ä»¥ä¸‹ä¸‰å€‹è‡´å‘½å•é¡Œï¼Œé€™è§£é‡‹äº†ç‚ºä»€éº¼ä½ çœ‹èµ·ä¾†å¯«äº†å¾ˆå¤šåŠŸèƒ½ï¼Œå¯¦éš›è·‘èµ·ä¾†å»åƒå€‹åŠæˆå“ï¼š

1. éåº¦ä¾è³´ SceneSetup.cs èˆ‡ BarSceneBuilder.cs (é€™æ˜¯ Three.js çš„ç¿’æ…£)
åœ¨ Three.js ä¸­ï¼Œä½ éœ€è¦ç”¨ç¨‹å¼ç¢¼ä¸€è¡Œä¸€è¡Œå» new Mesh, scene.add()ã€‚ä½†åœ¨ Unity ä¸­ï¼Œé€™æ˜¯åæ¨¡å¼ (Anti-pattern)ã€‚

ä½ çš„ç¾ç‹€ï¼šä½ çš„ SceneSetup.cs åœ¨ Awake() æ™‚æ‰ç”¨ç¨‹å¼ç¢¼å» new GameObject("GameManager")ï¼Œç„¶å¾Œ AddComponent<GameManager>()ã€‚

å¾Œæœï¼š

Inspector å¤±æ•ˆï¼šä½ ç„¡æ³•åœ¨ Unity ç·¨è¼¯å™¨ä¸­æ‹–æ‹‰è®Šæ•¸ã€èª¿æ•´åƒæ•¸ã€‚ä½ æƒ³æ”¹å€‹ç§»å‹•é€Ÿåº¦æˆ–å€’é…’é€Ÿåº¦ï¼Œå¾—å›é ­æ”¹ç¨‹å¼ç¢¼ç„¶å¾Œé‡æ–°ç·¨è­¯ã€‚

Race Condition (ç«¶çˆ­æ¢ä»¶)ï¼šGameManager å¯èƒ½é‚„æ²’åˆå§‹åŒ–å®Œï¼ŒInteractionSystem å°±å˜—è©¦å»æŠ“å®ƒï¼Œå°è‡´ NullReferenceException æ»¿å¤©é£›ã€‚

è¦–è¦ºèª¿æ•´å›°é›£ï¼šä½ ç„¡æ³•åœ¨ Scene View èª¿æ•´é…’ç“¶ä½ç½®ï¼Œåªèƒ½é çŒœæ¸¬åº§æ¨™å¯«åœ¨ç¨‹å¼ç¢¼è£¡ (new Vector3(-4 + i * 1.1, ...))ã€‚

2. UI æ˜¯ç”¨ç¨‹å¼ç¢¼ã€Œç•«ã€å‡ºä¾†çš„ (UIFactory.cs / UIBuilder.cs)
é€™åœ¨ Unity é–‹ç™¼ä¸­æ˜¯éå¸¸ç½•è¦‹ä¸”ä½æ•ˆçš„åšæ³•ã€‚

ä½ çš„ç¾ç‹€ï¼šä½ ç”¨ C# ç¨‹å¼ç¢¼å»è¨ˆç®— RectTransform çš„éŒ¨é»ã€ä½ç½®ã€å¤§å°ã€‚

å¾Œæœï¼š

UI é†œé™‹ä¸”é›£ä»¥æ’ç‰ˆã€‚

ä½ ç„¡æ³•é è¦½ UI æ•ˆæœï¼Œå¿…é ˆ Play æ‰èƒ½çœ‹åˆ°ã€‚

æœ€åš´é‡çš„ï¼šGameUIController éœ€è¦å¼•ç”¨å…·é«”çš„ Button å’Œ Textï¼Œä½†å› ç‚ºé€™äº› UI æ˜¯å‹•æ…‹ç”Ÿæˆçš„ï¼Œä½ å¿…é ˆå¯«ä¸€å † GameObject.Find æˆ–ä¾è³´æ³¨å…¥ä»£ç¢¼ä¾†é€£æ¥å®ƒå€‘ï¼Œé€™æ¥µå®¹æ˜“æ–·è£‚ã€‚

3. ä½¿ç”¨ GameObject.CreatePrimitive è€Œé Prefab
ä½ çš„ç¾ç‹€ï¼šä½ çš„é…’ç“¶ã€æ¯å­éƒ½æ˜¯ç”¨åœ“æŸ±é«” (Cylinder) å’Œè† å›Šé«” (Capsule) æ‹¼æ¹Šçš„ç¨‹å¼ç¢¼ç”Ÿæˆçš„ã€‚

å¾Œæœï¼š

æ²’æœ‰ç¾è¡“è³‡ç”¢ï¼Œçœ‹èµ·ä¾†å°±åƒã€Œç¨‹å¼è¨­è¨ˆå¸«çš„å¹¾ä½•åœ–å½¢æ¸¬è©¦ã€ã€‚

ç‰©ç†ç¢°æ’é«” (Collider) å’Œå‰›é«” (Rigidbody) çš„è¨­å®šè¢«å¯«æ­»åœ¨ä»£ç¢¼è£¡ï¼Œé›£ä»¥å¾®èª¿æ‰‹æ„Ÿã€‚

å…·é«”è¨ºæ–·ï¼šä½ çš„æ•´åˆå‡ºäº†ä»€éº¼å•é¡Œï¼Ÿ
ä½ æåˆ°çš„åŠŸèƒ½æ¸…å–®ä¸­ï¼Œé›–ç„¶ç¨‹å¼ç¢¼é‚è¼¯éƒ½åœ¨ï¼Œä½†å› ç‚ºç”Ÿæˆæ–¹å¼çš„é—œä¿‚ï¼Œå®ƒå€‘è™•æ–¼ã€Œæ–·è¯ã€ç‹€æ…‹ï¼š

å•†åº—ç³»çµ± (ShopManager):

ä»£ç¢¼: æœ‰é‚è¼¯ã€‚

ç¾å¯¦: å› ç‚º UI æ˜¯å‹•æ…‹ç”Ÿæˆçš„ï¼ŒShopManager å¯èƒ½æ ¹æœ¬æŠ“ä¸åˆ°æŒ‰éˆ•çš„ OnClick äº‹ä»¶ï¼Œæˆ–è€…å•†åº—é¢æ¿æ ¹æœ¬æ²’æœ‰è¢«æ­£ç¢ºæ›è¼‰åˆ° Canvas ä¸Šã€‚

å ´æ™¯è¼‰å…¥ (SceneLoader):

ä»£ç¢¼: æœ‰é‚è¼¯ã€‚

ç¾å¯¦: ä½ çš„éŠæˆ²åªæœ‰ä¸€å€‹ç©ºå ´æ™¯ï¼Œé  SceneSetup ç”Ÿæˆä¸€åˆ‡ã€‚SceneLoader æ ¹æœ¬æ²’æœ‰ã€Œå¦ä¸€å€‹å ´æ™¯ã€å¯ä»¥è¼‰å…¥ï¼ˆMainMenu å’Œ GameScene æ‡‰è©²æ˜¯å…©å€‹ç¨ç«‹çš„ .unity æª”æ¡ˆï¼Œè€Œä¸æ˜¯é ç¨‹å¼ç¢¼åˆ‡æ›ç‹€æ…‹ï¼‰ã€‚

å­˜æª”ç³»çµ± (SaveLoadSystem):

ä»£ç¢¼: æœ‰é‚è¼¯ã€‚

ç¾å¯¦: ç”±æ–¼ç‰©ä»¶æ˜¯å‹•æ…‹ç”Ÿæˆçš„ï¼Œæ²’æœ‰å”¯ä¸€çš„ ID æˆ–ç©©å®šçš„å¼•ç”¨ï¼Œå­˜æª”ç³»çµ±å¾ˆé›£çŸ¥é“è¦é‚„åŸå“ªä¸€ç“¶é…’åˆ°å“ªå€‹ä½ç½®ã€‚

ğŸš‘ ç·Šæ€¥æ•‘æ´æ–¹æ¡ˆï¼šå¦‚ä½•å¾ã€Œä»£ç¢¼ç”Ÿæˆã€è½‰å‘ã€ŒUnity æ¶æ§‹ã€
è«‹åœæ­¢å¯«æ–°çš„ C# åŠŸèƒ½ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿé‡æ§‹ä½ çš„å°ˆæ¡ˆï¼Œé€™èƒ½è®“ä½ çš„éŠæˆ²åœ¨ä¸€å°æ™‚å…§å¾ã€Œä»£ç¢¼å †ã€è®Šæˆã€Œå¯ç©éŠæˆ²ã€ã€‚

æ­¥é©Ÿ 1ï¼šå»ºç«‹çœŸæ­£çš„ Unity å ´æ™¯ (ä¸å†ä¾è³´ SceneSetup)
åˆªé™¤/åœç”¨ SceneSetup è…³æœ¬åœ¨å ´æ™¯ä¸­çš„é‹ä½œã€‚

åœ¨ Hierarchy ä¸­æ‰‹å‹•å»ºç«‹ä»¥ä¸‹çµæ§‹ï¼š

--- MANAGERS --- (ç©ºç‰©ä»¶)

GameManager (æ›è¼‰ GameManager.cs)

AudioManager (æ›è¼‰ AudioManager.cs)

InteractionSystem (æ›è¼‰ InteractionSystem.cs)

...å…¶ä»–ç®¡ç†å™¨

--- ENVIRONMENT --- (ç©ºç‰©ä»¶)

åœ°æ¿ (Plane)

å§å° (Cube)

é…’æ¶

--- PLAYER ---

Player (æ›è¼‰ FirstPersonController, CharacterController)

MainCamera

ç‚ºä»€éº¼é€™æ¨£åšï¼Ÿ é€™æ¨£ä½ é»æ“Š GameManagerï¼Œå°±å¯ä»¥åœ¨ Inspector è£¡çœ‹åˆ°æ‰€æœ‰åƒæ•¸ï¼Œä¸¦ä¸”ç›´æ¥æŠŠ Player æ‹–é€²å»å¼•ç”¨ï¼Œå†ä¹Ÿä¸ç”¨å¯« FindObjectOfTypeã€‚

æ­¥é©Ÿ 2ï¼šè£½ä½œ Prefab (ä¸å†ä½¿ç”¨ CreatePrimitive)
ä¸è¦åœ¨ä»£ç¢¼è£¡ new GameObjectã€‚

åœ¨ Scene è£¡å‰µå»ºä¸€å€‹ Cylinderï¼Œèª¿æ•´å¥½å¤§å°åƒå€‹é…’ç“¶ã€‚

æ›ä¸Š Bottle.cs å’Œ Rigidbodyã€‚

è¨­å®šå¥½ Layer ç‚º Interactableã€‚

å°‡é€™å€‹ç‰©ä»¶æ‹–é€² Project è¦–çª—çš„ Prefabs è³‡æ–™å¤¾ï¼Œè®Šæˆ Prefabã€‚

å° Glass, Shaker, NPC é‡è¤‡æ­¤æ­¥é©Ÿã€‚

ä¿®æ”¹ä»£ç¢¼ï¼š å» BarSceneBuilder.cs æˆ–ç”Ÿæˆå™¨ä¸­ï¼ŒæŠŠ CreateDefaultBottle é€™ç¨®å‡½æ•¸åˆªæ‰ï¼Œæ”¹æˆï¼š

C#

[SerializeField] private GameObject bottlePrefab; // åœ¨ Inspector è£¡æŠŠåšå¥½çš„ Prefab æ‹–é€²ä¾†

private void SpawnBottle(...) {
    Instantiate(bottlePrefab, position, rotation);
}
æ­¥é©Ÿ 3ï¼šä½¿ç”¨ Unity UI (UGUI) è£½ä½œä»‹é¢
åœ¨ Hierarchy å³éµ -> UI -> Canvasã€‚

æ‰‹å‹•åœ¨ Scene View è£¡æ‹‰å‡ºä½ çš„æº–å¿ƒã€è¡€æ¢ã€å°è©±æ¡†ã€å•†åº—é¢æ¿ã€‚

æŠŠåšå¥½çš„ UI å­˜æˆ Prefab (ä¾‹å¦‚ HUD_Panel, Shop_Panel)ã€‚

åœ¨ UIManager ä¸­ç›´æ¥å¼•ç”¨é€™äº›ç‰©ä»¶ã€‚

ä¿®æ”¹ä»£ç¢¼ï¼š å»¢æ£„ UIFactory.cs å’Œ UIBuilder.cs çš„å¤§éƒ¨åˆ†å…§å®¹ã€‚ä½ çš„ GameUIController æ‡‰è©²é•·é€™æ¨£ï¼š

C#

public class GameUIController : MonoBehaviour {
    [SerializeField] private GameObject shopPanel; // ç›´æ¥åœ¨ Editor æ‹–é€²å»ï¼Œä¸è¦ç”¨ç¨‹å¼ç¢¼æ‰¾
    
    public void ToggleShop() {
        shopPanel.SetActive(!shopPanel.activeSelf);
    }
}
ç¸½çµ
ä½ çš„ç¨‹å¼ç¢¼èƒ½åŠ›å¾ˆå¼·ï¼ˆé‚è¼¯å¯«å¾—å¾ˆå®Œæ•´ï¼‰ï¼Œä½†ä½ ç”¨éŒ¯äº† Unity çš„å·¥ä½œæµã€‚

åªè¦ä½ åšé€™ä»¶äº‹ï¼š

åœæ­¢ç”¨ C# ç¨‹å¼ç¢¼å» new é‚£äº›æ‡‰è©²åœ¨ Editor è£¡æ“ºå¥½çš„æ±è¥¿ã€‚

ä½ çš„éŠæˆ²å°±æœƒç«‹åˆ»å¾ã€Œä¸€å †æ•£è½çš„è…³æœ¬ã€è®Šæˆã€Œä¸€å€‹æ•´åˆå¥½çš„éŠæˆ²ã€ã€‚ä½ çš„æ‰€æœ‰ç³»çµ±ï¼ˆå•†åº—ã€å­˜æª”ã€äº’å‹•ï¼‰ä¹‹æ‰€ä»¥æ„Ÿè¦ºæ²’å¥—ç”¨ï¼Œæ˜¯å› ç‚ºå®ƒå€‘éƒ½åœ¨ç©ºä¸­æ¨“é–£ä¸Šé‹ä½œï¼Œæ²’æœ‰å¯¦éš›çš„å ´æ™¯ç‰©ä»¶è®“å®ƒå€‘é™„è‘—ã€‚

ç¾åœ¨è«‹æ‰“é–‹ Unity Editorï¼Œé–‹å§‹æ‹‰å ´æ™¯ã€åš Prefabã€æ‹‰ UIï¼Œé€™æ‰æ˜¯æ•´åˆçš„é–‹å§‹ã€‚